<div class="container my-2">
  <div class="d-flex justify-content-center my-3">
    <h1>Listado de Jugadores</h1>
  </div>

  <div class="d-flex justify-content-between my-1" [hidden]="totalElementsCount === 0">
    <app-paginacion
      [numPage]="numPage"
      [numPages]="oPage?.totalPages || 1"
      (pageChange)="goToPage($event)"
    >
    </app-paginacion>

    <app-botonera-rpp [numRpp]="numRpp" (rppChange)="onRppChange($event)"> </app-botonera-rpp>
  </div>

  <div class="d-flex justify-content-center" [hidden]="totalElementsCount === 0">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col" (click)="onOrder('id')" style="cursor: pointer; width: 5%">
            <span class="header-inline"
              >ID @if (orderField === 'id') { @if (orderDirection === 'asc') {
              <i class="bi bi-caret-up-fill ms-1" aria-hidden="true"></i>
              } @if (orderDirection === 'desc') {
              <i class="bi bi-caret-down-fill ms-1" aria-hidden="true"></i>
              } }
            </span>
          </th>
          <th scope="col" (click)="onOrder('dorsal')" style="cursor: pointer; width: 10%">
            <span class="header-inline"
              >Dorsal @if (orderField === 'dorsal') { @if (orderDirection === 'asc') {
              <i class="bi bi-caret-up-fill ms-1" aria-hidden="true"></i>
              } @if (orderDirection === 'desc') {
              <i class="bi bi-caret-down-fill ms-1" aria-hidden="true"></i>
              } }
            </span>
          </th>
          <th scope="col" (click)="onOrder('posicion')" style="cursor: pointer; width: 15%">
            <span class="header-inline"
              >Posición @if (orderField === 'posicion') { @if (orderDirection === 'asc') {
              <i class="bi bi-caret-up-fill ms-1" aria-hidden="true"></i>
              } @if (orderDirection === 'desc') {
              <i class="bi bi-caret-down-fill ms-1" aria-hidden="true"></i>
              } }
            </span>
          </th>
          <th scope="col" style="cursor: pointer; width: 10%">
            <span class="header-inline">Capitán</span>
          </th>
          <th scope="col" style="width: 10%">Imagen</th>
          <th scope="col" (click)="onOrder('usuario.nombre')" style="cursor: pointer; width: 25%">
            <span class="header-inline"
              >Jugador @if (orderField === 'usuario.nombre') { @if (orderDirection === 'asc') {
              <i class="bi bi-caret-up-fill ms-1" aria-hidden="true"></i>
              } @if (orderDirection === 'desc') {
              <i class="bi bi-caret-down-fill ms-1" aria-hidden="true"></i>
              } }
            </span>
          </th>
          <th scope="col" (click)="onOrder('equipo.nombre')" style="cursor: pointer; width: 25%">
            <span class="header-inline"
              >Equipo @if (orderField === 'equipo.nombre') { @if (orderDirection === 'asc') {
              <i class="bi bi-caret-up-fill ms-1"></i>
              } @if (orderDirection === 'desc') {
              <i class="bi bi-caret-down-fill ms-1"></i>
              } }
            </span>
          </th>
        </tr>
      </thead>
      <tbody>
        @for (jugador of oPage?.content; track jugador.id ) {
        <tr>
          <th scope="row">{{ jugador.id }}</th>
          <td>
            <span class="badge bg-primary">{{ jugador.dorsal }}</span>
          </td>
          <td>{{ jugador.posicion }}</td>
          <td class="text-center align-middle">
            @if (jugador.capitan) {
            <span class="text-warning d-inline-flex align-items-center">
              <i class="bi bi-star-fill me-1"></i>
            </span>
            } @if (!jugador.capitan) {
            <span class="text-secondary d-inline-flex align-items-center">
              <i class="bi bi-star me-1"></i>
            </span>
            }
          </td>
          <td>
            @if (jugador.imagen) {
            <img [src]="jugador.imagen" alt="Imagen jugador" class="img-thumbnail" style="max-width: 50px;">
            } @if (!jugador.imagen) {
            <span class="text-muted small">Sin imagen</span>
            }
          </td>
          <td>
            @if (jugador.usuario) {
            {{ jugador.usuario.nombre }} {{ jugador.usuario.apellido1 }} {{ jugador.usuario.apellido2 }}
            } @if (!jugador.usuario) {
            <span class="text-muted">N/A</span>
            }
          </td>
          <td>
            @if (jugador.equipo) {
            {{ jugador.equipo.nombre }}
            } @if (!jugador.equipo) {
            <span class="text-muted">N/A</span>
            }
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  
  @if (totalElementsCount === 0) {
  <div class="d-flex justify-content-center my-4">
    <div class="alert alert-secondary text-center w-100" style="max-width: 720px">
      <h5 class="mb-1">No hay jugadores</h5>
      <p class="small mb-2">No hay registros para mostrar en este momento.</p>
    </div>
  </div>
  }
</div>
